# forest-data-compilation configuration
# Nested structure: access paths like config['raw']['ads']['files']['region1']['url']

base_path: '/home/ermiller/forest-data-compilation'

# ==============================================================================
# RAW DATA
# ==============================================================================

raw:

  ids:
    description: "USDA Forest Service Insect and Disease Detection Survey"
    source: "https://www.fs.usda.gov/science-technology/data-tools-products/fhp-mapping-reporting/detection-surveys"
    format: "geodatabase (.gdb)"
    local_dir: "01_ids/data/raw"
    files:
      region1:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region1_AllYears.gdb.zip"
        filename: "CONUS_Region1_AllYears.gdb.zip"
        description: "Northern Region (MT, ND, ID panhandle)"
      region2:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region2_AllYears.gdb.zip"
        filename: "CONUS_Region2_AllYears.gdb.zip"
        description: "Rocky Mountain Region (CO, WY, SD, NE, KS)"
      region3:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region3_AllYears.gdb.zip"
        filename: "CONUS_Region3_AllYears.gdb.zip"
        description: "Southwestern Region (AZ, NM)"
      region4:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region4_AllYears.gdb.zip"
        filename: "CONUS_Region4_AllYears.gdb.zip"
        description: "Intermountain Region (UT, NV, ID, WY)"
      region5_ca:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region5_AllYears.gdb.zip"
        filename: "CONUS_Region5_AllYears.gdb.zip"
        description: "Pacific Southwest Region - California"
      region5_hi:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/HI_Region5_AllYears.gdb.zip"
        filename: "HI_Region5_AllYears.gdb.zip"
        description: "Pacific Southwest Region - Hawaii"
      region6:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region6_AllYears.gdb.zip"
        filename: "CONUS_Region6_AllYears.gdb.zip"
        description: "Pacific Northwest Region (OR, WA)"
      region8:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region8_AllYears.gdb.zip"
        filename: "CONUS_Region8_AllYears.gdb.zip"
        description: "Southern Region (13 southeastern states)"
      region9:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/CONUS_Region9_AllYears.gdb.zip"
        filename: "CONUS_Region9_AllYears.gdb.zip"
        description: "Eastern Region (20 northeastern/midwestern states)"
      region10:
        url: "https://www.fs.usda.gov/foresthealth/docs/IDS_Data_for_Download/AK_Region10_AllYears.gdb.zip"
        filename: "AK_Region10_AllYears.gdb.zip"
        description: "Alaska Region"

  terraclimate:
      description: "High-resolution global climate and water balance (1958-present)"
      source: "https://www.climatologylab.org/terraclimate.html"
      citation: "Abatzoglou et al. 2018, Scientific Data"
      format: "extracted via GEE"
      access_method: "Google Earth Engine"
      gee_asset: "IDAHO_EPSCOR/TERRACLIMATE"
      spatial_resolution: "~4km (1/24th degree)"
      temporal_resolution: "monthly"
      local_dir: "02_terraclimate/data/raw"
      variables:
        tmmx:
          description: "Maximum temperature"
          units: "°C"
          scale: 0.1
        tmmn:
          description: "Minimum temperature"
          units: "°C"
          scale: 0.1
        pr:
          description: "Precipitation accumulation"
          units: "mm"
          scale: 1
        srad:
          description: "Downward surface shortwave radiation"
          units: "W/m2"
          scale: 0.1
        vs:
          description: "Wind speed at 10m"
          units: "m/s"
          scale: 0.01
        vap:
          description: "Vapor pressure"
          units: "kPa"
          scale: 0.001
        vpd:
          description: "Vapor pressure deficit"
          units: "kPa"
          scale: 0.01
        pet:
          description: "Reference evapotranspiration (Penman-Monteith)"
          units: "mm"
          scale: 0.1
        aet:
          description: "Actual evapotranspiration"
          units: "mm"
          scale: 0.1
        def:
          description: "Climate water deficit"
          units: "mm"
          scale: 0.1
        soil:
          description: "Soil moisture"
          units: "mm"
          scale: 0.1
        swe:
          description: "Snow water equivalent"
          units: "mm"
          scale: 1
        ro:
          description: "Runoff"
          units: "mm"
          scale: 1
        pdsi:
          description: "Palmer Drought Severity Index"
          units: "unitless"
          scale: 0.01
        
  prism:
    description: "PRISM climate data for contiguous US"
    source: "https://prism.oregonstate.edu/"
    format: "extracted via GEE"
    access_method: "Google Earth Engine"
    gee_asset: "OREGONSTATE/PRISM/AN81m"
    spatial_resolution: "~800m"
    temporal_resolution: "monthly"
    coverage_note: "CONUS only (no Alaska/Hawaii)"
    local_dir: "03_prism/data/raw"
    variables:
      ppt:
        description: "Total precipitation"
        units: "mm"
      tmean:
        description: "Mean air temperature"
        units: "°C"
      tmin:
        description: "Minimum air temperature"
        units: "°C"
      tmax:
        description: "Maximum air temperature"
        units: "°C"
      tdmean:
        description: "Mean dewpoint temperature"
        units: "°C"
      vpdmin:
        description: "Minimum vapor pressure deficit"
        units: "hPa"
      vpdmax:
        description: "Maximum vapor pressure deficit"
        units: "hPa"
    suggested_variables: ["ppt", "tmean", "tmin", "tmax", "vpdmax"]

  worldclim:
    description: "Global climate monthly climatologies"
    source: "https://www.worldclim.org/data/monthlywth.html"
    format: "extracted via GEE"
    access_method: "Google Earth Engine"
    gee_asset: "WORLDCLIM/V1/MONTHLY"
    spatial_resolution: "~1km"
    temporal_resolution: "monthly climatology"
    local_dir: "04_worldclim/data/raw"
    variables:
      prec:
        description: "Monthly precipitation climatology"
        units: "mm"
      tavg:
        description: "Monthly average temperature climatology"
        units: "°C"
      tmin:
        description: "Monthly minimum temperature climatology"
        units: "°C"
      tmax:
        description: "Monthly maximum temperature climatology"
        units: "°C"
    suggested_variables: ["prec", "tavg", "tmin", "tmax"]

  era5_daily:
    description: "ERA5 daily reanalysis single-level variables"
    source: "https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels?tab=overview"
    format: "extracted via GEE"
    access_method: "Google Earth Engine"
    gee_asset: "ECMWF/ERA5/DAILY"
    spatial_resolution: "~0.25 degree (~27.8km)"
    temporal_resolution: "daily"
    local_dir: "05_era5/data/raw"
    variables:
      mean_2m_air_temperature:
        description: "Mean 2m air temperature"
        units: "K"
      minimum_2m_air_temperature:
        description: "Minimum 2m air temperature"
        units: "K"
      maximum_2m_air_temperature:
        description: "Maximum 2m air temperature"
        units: "K"
      total_precipitation:
        description: "Total precipitation"
        units: "m"
      u_component_of_wind_10m:
        description: "10m eastward wind component"
        units: "m/s"
      v_component_of_wind_10m:
        description: "10m northward wind component"
        units: "m/s"
      surface_solar_radiation_downwards:
        description: "Surface solar radiation downwards"
        units: "J/m2"
      snow_depth:
        description: "Snow depth"
        units: "m"
      total_evaporation:
        description: "Total evaporation"
        units: "m"
      volumetric_soil_water_layer_1:
        description: "Volumetric soil water layer 1"
        units: "m3/m3"
      volumetric_soil_water_layer_2:
        description: "Volumetric soil water layer 2"
        units: "m3/m3"
      volumetric_soil_water_layer_3:
        description: "Volumetric soil water layer 3"
        units: "m3/m3"
      volumetric_soil_water_layer_4:
        description: "Volumetric soil water layer 4"
        units: "m3/m3"
    suggested_variables:
      - mean_2m_air_temperature
      - minimum_2m_air_temperature
      - maximum_2m_air_temperature
      - total_precipitation
      - u_component_of_wind_10m
      - v_component_of_wind_10m
      - surface_solar_radiation_downwards
      - snow_depth
      - volumetric_soil_water_layer_1
      - volumetric_soil_water_layer_2
      - volumetric_soil_water_layer_3
      - volumetric_soil_water_layer_4

# ==============================================================================
# PROCESSED DATA
# ==============================================================================

processed:

  ids:
    local_dir: "01_ids/data/processed"
    files:
      merged:
        filename: "ids_all_regions.gpkg"
        description: "All regions merged into single file"
      cleaned:
        filename: "ids_cleaned.gpkg"
        description: "After QC and cleaning"

  terraclimate:
    local_dir: "02_terraclimate/data/processed"
    files:
      cleaned:
        filename: "terraclimate_cleaned.csv"
        description: "Extracted and cleaned TerraClimate data"

# ==============================================================================
# MERGED DATA
# ==============================================================================

merged:
  local_dir: "merged_data"
  files:
    deliverable1:
      filename: "ids_terraclimate_merged.csv"
      description: "IDS observations joined with TerraClimate variables"

# ==============================================================================
# PARAMETERS
# ==============================================================================

params:
  study_area:
    description: "Continental US bounding box"
    xmin: -125
    xmax: -66
    ymin: 24
    ymax: 50
  time_range:
    start_year: 1997
    end_year: 2024
  crs: "EPSG:4326"